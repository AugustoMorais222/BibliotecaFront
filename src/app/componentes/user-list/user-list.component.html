<p-table
  [value]="usuarios"
  dataKey="_id"
  editMode="row"
  [tableStyle]="{ 'min-width': '40rem' }"
>
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 30%">Nome</th>
      <th style="width: 30%">Email</th>
      <th style="width: 40%">Ações</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-usuario let-editing="editing" let-ri="rowIndex">
    <tr [pEditableRow]="usuario">
      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input
              pInputText
              type="text"
              [(ngModel)]="usuario.nome"
              required
            />
          </ng-template>
          <ng-template pTemplate="output">
            {{ usuario.nome }}
          </ng-template>
        </p-cellEditor>
      </td>

      <td>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input
              pInputText
              type="email"
              [(ngModel)]="usuario.email"
              required
            />
          </ng-template>
          <ng-template pTemplate="output">
            {{ usuario.email }}
          </ng-template>
        </p-cellEditor>
      </td>

      <td>
        <div class="flex justify-content-center gap-2">
          <button
            *ngIf="!editing"
            pButton
            pRipple
            type="button"
            pInitEditableRow
            icon="pi pi-pencil"
            label="editar"
            (click)="onRowEditInit(usuario)"
            text
            rounded
            severity="info"
          ></button>
          <button
            *ngIf="editing"
            pButton
            pRipple
            type="button"
            pSaveEditableRow
            icon="pi pi-check"
            (click)="onRowEditSave(usuario)"
            text
            rounded
            severity="success"
          ></button>
          <button
            *ngIf="editing"
            pButton
            pRipple
            type="button"
            pCancelEditableRow
            icon="pi pi-times"
            label="editar"
            (click)="onRowEditCancel(usuario, ri)"
            text
            rounded
            severity="danger"
          ></button>
          <button
            pButton
            pRipple
            type="button"
            icon="pi pi-trash"
            (click)="deletarUsuario(usuario._id!)"
            text
            rounded
            severity="danger"
          ></button>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

